<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:jsf="http://xmlns.jcp.org/jsf"
	xmlns:pa="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:p="http://primefaces.org/ui">


<body jsf:id="bodyMain">

	<ui:composition template="layout.xhtml">
		<ui:define name="content">
			<!-- ======Breadcrumb====== -->
			<ol class="breadcrumb r-0">
				<li><a href="#">Inicio</a></li>
				<li><a href="#">Tipos de Tramites</a></li>
				<li class="active">Administrar Tipos de Tramite</li>
			</ol>
			<!-- ======FIN Breadcrumb====== -->
			<p:dialog modal="true" widgetVar="statusDialog" header="Status"
				draggable="false" closable="false" resizable="false">
				<p:graphicImage url="../assets/img/ajaxloadingbar.gif" />
			</p:dialog>

			<form jsf:id="form">

				<div class="row">
					<div class="col-lg-12">
						<div class="card">
							<div class="card-header">Administración Tipos Trámite</div>
							<div class="card-block">

								<div class="row">
									<div class="col-md-9"></div>
									<div class="col-md-3">
										<p:commandButton action="#{tipoTramiteMB.preModal}"
											update=":formD" oncomplete="PF('carDialog').show()"
											value="Crear Tipo Tramite">
											<f:setPropertyActionListener value="#{true}"
												target="#{tipoTramiteMB.creacion}" />
										</p:commandButton>
									</div>
								</div>

								<h:panelGrid columns="1" layout="grid">
									<p:growl id="msgs" showDetail="true" />
									<p:dataTable id="basicDT" var="tipoTramite"
										value="#{tipoTramiteMB.tiposTramite}">
										<p:column headerText="Nombre" sortBy="#{tipoTramite.nombre}"
											filterBy="#{tipoTramite.nombre}" filterStyle="height:20px;">
											<h:outputText value="#{tipoTramite.nombre}" />
										</p:column>
										<p:column headerText="Descripción" filterStyle="height:20px;">
											<h:outputText value="#{tipoTramite.descripcion}" />
										</p:column>
										<p:column headerText="Valor" sortBy="#{tipoTramite.valor}"
											filterBy="#{tipoTramite.valor}" filterStyle="height:20px;">
											<h:outputText value="#{tipoTramite.valor}" />
										</p:column>
										<p:column style="width:5%;text-align: center">
											<p:commandButton action="#{tipoTramiteMB.preModal}"
												update=":formD :form" oncomplete="PF('carDialog').show()"
												icon="ui-icon-search" title="View">
												<f:setPropertyActionListener value="#{tipoTramite}"
													target="#{tipoTramiteMB.tipoTramiteSelecc}" />
												<f:setPropertyActionListener value="#{false}"
													target="#{tipoTramiteMB.creacion}" />
											</p:commandButton>

										</p:column>
									</p:dataTable>

								</h:panelGrid>
							</div>
						</div>
					</div>
				</div>
			</form>


			<p:dialog widgetVar="carDialog" modal="true" showEffect="fade"
				hideEffect="fade" resizable="true" header="Información Tipo Trámite">
				<p:scrollPanel id="carDetail" mode="native" style="height:380px">

					<form jsf:id="formD">
						<p:panelGrid>
							<p:row>
								<p:column>
									<input type="text" required="true" placeholder="Nombre"
										jsf:value="#{tipoTramiteMB.tipoTramiteSelecc.nombre}"
										class="form-control" style="width: 250px"></input>
								</p:column>
								<p:column rowspan="3">
									<label>Municipios</label>
									<p:pickList id="listaMunicipios"
										value="#{tipoTramiteMB.municipios}" var="municipio"
										itemValue="#{municipio}"
										itemLabel="#{municipio.nombre}" converter="municipioConverter">
										<f:facet name="sourceCaption">Disponibles</f:facet>
										<f:facet name="targetCaption">Seleccionados</f:facet>
									</p:pickList>
								</p:column>
							</p:row>
							<p:row>
								<p:column>
									<input type="number" required="true" placeholder="Valor"
										jsf:value="#{tipoTramiteMB.tipoTramiteSelecc.valor}"
										class="form-control" style="width: 250px"></input>
								</p:column>
							</p:row>
							<p:row>
								<p:column>
									<textarea cols="60" rows="5" required="true"
										placeholder="Descripción"
										jsf:value="#{tipoTramiteMB.tipoTramiteSelecc.descripcion}"
										class="form-control" />
								</p:column>
							</p:row>
							<f:facet name="footer">
								<p:row>
									<p:column colspan="2">
										<button jsf:id="registroBtn"
											jsf:action="#{tipoTramiteMB.persistirTipoTramite}"
											jsf:update="basicDT" class="btn btn-sm btn-primary">
											<i class="fa fa-floppy-o"></i> Guardar
										</button>
										<button
											onclick="PF('carDialog').hide();$('#formD').trigger('reset');"
											class="btn btn-sm btn-danger">
											<i class="fa fa-ban"></i> Cancelar
										</button>
									</p:column>
								</p:row>
							</f:facet>
						</p:panelGrid>
					</form>
				</p:scrollPanel>
			</p:dialog>

		</ui:define>

	</ui:composition>

</body>

</html>